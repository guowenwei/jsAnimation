<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JS 动画</title>
    <style>
        ul, li {
            list-style: none;
        }

        ul li {
            margin-bottom: 10px;
            background: red;
            /**
             * opacity 透明度
             */
            opacity: 30;
            width: 200px;
            height: 200px;
            border: 4px solid green;
        }
    </style>
    <script>

        window.onload = function () {
            var li2 = document.getElementById('1');
            li2.onmouseover = function () {
                startAnimation(this, 'width', 500);
            }
            li2.onmouseout = function () {
                startAnimation(this, 'width', 200);
            }

            var li1 = document.getElementById('2');
            li1.onmouseover = function () {
                startAnimation(this,'height',500);
            }
            li1.onmouseout = function () {
                startAnimation(this,'height',200)
            }

            var li3 = document.getElementById('3');
            li3.onmouseover = function () {
                startAnimation(this,'opacity',30);
            }
            li3.onmouseout = function () {
                startAnimation(this,'opacity',100);
            }
        }

        function startAnimation(obj, attr, target) {
            clearInterval(obj.timer);

            obj.timer = setInterval(function () {
                var icur = 0;
                if (attr == 'opacity') {
                    //Math.round四舍五入
                    icur = Math.round(parseFloat(getStyle(obj, attr)) * 100);
                } else {
                    icur = parseInt(getStyle(obj, attr));
                }

                var speed = (target - icur) / 8;
                speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);
                if (icur == target) {
                    clearInterval(obj.timer);
                } else {
                    if (attr == 'opacity') {
                        obj.style.filter = 'alpha:(opacity:'+icur+speed+')';
                        obj.style.opacity = (speed + icur) / 100;
                        console.log(obj.style.opacity);
                    } else {
                        obj.style[attr] = icur + speed + 'px';
                    }
                }
            }, 30)
        }

        /**
         * 根据对象得到真实的属性
         * @param obj
         * @param attr
         * @returns {*}
         */
        function getStyle(obj, attr) {
            if (obj.currentStyle) {//IE
                return obj.currentStyle[attr];
            } else {//firefox
                return getComputedStyle(obj, false)[attr];
            }
        }

    </script>
</head>
<body>
<ul>
    <li id="1"></li>
    <li id="2"></li>
    <li id="3"></li>
</ul>

</body>
</html>